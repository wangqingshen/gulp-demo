{"version":3,"sources":["aui/aui-actionsheet.js"],"names":["window","undefined","auiActionsheet","prototype","init","params","callback","this","frameBounces","title","buttons","cancelTitle","destructiveTitle","maskDiv","actionsheetDiv","self","open","titleHtml","buttonsHtml","destructiveHtml","cancelHtml","btnHtml","document","createElement","className","body","appendChild","length","i","insertAdjacentHTML","querySelector","offsetHeight","classList","add","style","webkitTransform","transform","opacity","addEventListener","event","preventDefault","api","setFrameAttr","bounces","actionsheetButtons","querySelectorAll","setTimeout","onclick","close","ii","e","buttonIndex","buttonTitle","textContent","actionsheetHeight","parentNode","removeChild"],"mappings":"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","file":"aui-actionsheet.js","sourcesContent":["/**\n * aui-actionsheet.js\n * @author 流浪男\n * Licensed under the MIT license.\n * http://www.opensource.org/licenses/mit-license.php\n */\n(function( window, undefined ) {\n    \"use strict\";\n    var auiActionsheet = function() {\n    };\n    var isShow = false;\n    auiActionsheet.prototype = {\n        init: function(params,callback){\n            this.frameBounces = params.frameBounces;\n            this.title = params.title;\n            this.buttons = params.buttons;\n            this.cancelTitle = params.cancelTitle;\n            this.destructiveTitle = params.destructiveTitle;\n            this.maskDiv;\n            this.actionsheetDiv;\n            var self = this;\n            self.open(params,callback);\n        },\n        open: function(params,callback) {\n            var titleHtml='',buttonsHtml='',destructiveHtml='',cancelHtml='',btnHtml='';\n        \tvar self = this;\n            if(self.actionsheetDiv || (!self.title && !self.buttons && !self.cancelTitle && !self.destructiveTitle))return;\n            if(!self.maskDiv){\n                self.maskDiv = document.createElement(\"div\");\n                self.maskDiv.className = \"aui-mask\";\n                document.body.appendChild(self.maskDiv);\n            }\n            self.actionsheetDiv = document.createElement(\"div\");\n            self.actionsheetDiv.className = \"aui-actionsheet\";\n            document.body.appendChild(self.actionsheetDiv);\n            if(self.title){\n                titleHtml = '<div class=\"aui-actionsheet-title aui-border-b aui-font-size-12\">'+self.title+'</div>';\n            }\n            if(self.buttons && self.buttons.length){\n                for(var i = 0; i < self.buttons.length;i++){\n                    if(i == self.buttons.length-1){\n                        buttonsHtml += '<div class=\"aui-actionsheet-btn-item\">'+self.buttons[i]+'</div>';\n                    }else{\n                        buttonsHtml += '<div class=\"aui-actionsheet-btn-item aui-border-b\">'+self.buttons[i]+'</div>';\n                    }\n                }\n            }\n            if(self.destructiveTitle){\n                destructiveHtml = '<div class=\"aui-actionsheet-btn-item aui-border-t aui-text-danger\">'+self.destructiveTitle+'</div>';\n            }else{\n                var destructiveHtml = '';\n            }\n            if(self.title || (self.buttons && self.buttons.length)){\n                btnHtml = '<div class=\"aui-actionsheet-btn\">'+titleHtml+''+buttonsHtml+''+destructiveHtml+'</div>';\n            }\n            if(self.cancelTitle){\n                cancelHtml = '<div class=\"aui-actionsheet-btn\"><div class=\"aui-actionsheet-btn-item\">'+self.cancelTitle+'</div></div>';\n            }\n            self.actionsheetDiv.insertAdjacentHTML('beforeend', btnHtml+cancelHtml);\n            var actionsheetHeight = document.querySelector(\".aui-actionsheet\").offsetHeight;\n            self.maskDiv.classList.add(\"aui-mask-in\");\n            self.actionsheetDiv.style.webkitTransform = self.actionsheetDiv.style.transform = \"translate3d(0,0,0)\";\n            self.actionsheetDiv.style.opacity = 1;\n            self.actionsheetDiv.addEventListener(\"touchmove\", function(event){\n                event.preventDefault();\n            })\n            self.maskDiv.addEventListener(\"touchmove\", function(event){\n                event.preventDefault();\n            })\n            if(typeof(api) != 'undefined' && typeof(api) == 'object' && self.frameBounces){\n                api.setFrameAttr({\n                    bounces:false\n                });\n            }\n            var actionsheetButtons = document.querySelectorAll(\".aui-actionsheet-btn-item\");\n            if(actionsheetButtons && actionsheetButtons.length > 0){\n                setTimeout(function(){\n                    self.maskDiv.onclick = function(){self.close();return;};\n                    for(var ii = 0; ii < actionsheetButtons.length; ii++){\n                        (function(e){\n                            actionsheetButtons[e].onclick = function(){\n                                if(callback){\n                                    callback({\n                                        buttonIndex: e+1,\n                                        buttonTitle: this.textContent\n                                    });\n                                };\n                                self.close();\n                                return;\n                            }\n                        })(ii)\n                    }\n                }, 350)\n            }\n        },\n        close: function(){\n            var self = this;\n            if(typeof(api) != 'undefined' && typeof(api) == 'object' && self.frameBounces){\n                api.setFrameAttr({\n                    bounces:true\n                });\n            }\n            if(self.actionsheetDiv){\n                var actionsheetHeight = self.actionsheetDiv.offsetHeight;\n                self.actionsheetDiv.style.webkitTransform = self.actionsheetDiv.style.transform = \"translate3d(0,\"+actionsheetHeight+\"px,0)\";\n                self.maskDiv.style.opacity = 0;\n                setTimeout(function(){\n                    if(self.maskDiv){\n                        self.maskDiv.parentNode.removeChild(self.maskDiv);\n                    }\n                    self.actionsheetDiv.parentNode.removeChild(self.actionsheetDiv);\n                    self.actionsheetDiv = self.maskDiv = false;\n                }, 300)\n            }\n        }\n    };\n\twindow.auiActionsheet = auiActionsheet;\n})(window);"]}