{"version":3,"sources":["aui/aui-scroll.js"],"names":["window","isToBottom","auiScroll","params","callback","this","extend","_init","prototype","listren","distance","self","listen","document","body","addEventListener","e","scroll","onscroll","scrollTop","documentElement","clientHeight","scrollHeight","innerHeight","a","b","key","hasOwnProperty"],"mappings":"CAOA,SAAUA,GACT,YACA,IAAIC,IAAa,EACbC,EAAY,SAAUC,EAAOC,GAChCC,KAAKC,OAAOD,KAAKF,OAAQA,GACzBE,KAAKE,MAAMJ,EAAOC,GAEnBF,GAAUM,WACTL,QACCM,SAAQ,EACCC,SAAU,KAEpBH,MAAQ,SAASJ,EAAOC,GACvB,GAAIO,GAAON,IACRM,GAAKR,OAAOS,SACdC,SAASC,KAAKC,iBAAiB,YAAa,SAASC,GACpDL,EAAKM,OAAOb,KAEbS,SAASC,KAAKC,iBAAiB,WAAY,SAASC,GACnDL,EAAKM,OAAOb,MAGdJ,EAAOkB,SAAW,WACjBP,EAAKM,OAAOb,KAGda,OAAS,SAAUb,GAClB,GAAIO,GAAON,KAEPc,GADsD,IAAvCN,SAASO,gBAAgBD,UAAkBN,SAASC,KAAKO,aAAeR,SAASO,gBAAgBC,aAC7D,IAAvCR,SAASO,gBAAgBD,UAAkBN,SAASC,KAAKK,UAAYN,SAASO,gBAAgBD,WAC1GG,EAAsD,IAAvCT,SAASO,gBAAgBD,UAAkBN,SAASC,KAAKQ,aAAeT,SAASO,gBAAgBE,YAEhHA,GAAaH,EAAUR,EAAKR,OAAOO,UAAYV,EAAOuB,aACnDtB,GAAa,EACVA,GACFG,GACCe,UAAYA,EACZlB,YAAa,MAIfA,GAAa,EACbG,GACCe,UAAYA,EACZlB,YAAa,MAIhBK,OAAQ,SAASkB,EAAGC,GACzB,IAAK,GAAIC,KAAOD,GACTA,EAAEE,eAAeD,KACpBF,EAAEE,GAAOD,EAAEC,GAGb,OAAOF,KAGXxB,EAAOE,UAAYA,GACjBF","file":"aui-scroll.js","sourcesContent":["/**\n * aui-scroll.js\n * @author  流浪男\n * @todo more things to abstract, e.g. Loading css etc.\n * Licensed under the MIT license.\n * http://www.opensource.org/licenses/mit-license.php\n */\n(function(window) {\n\t'use strict';\n\tvar isToBottom = false,isMoved = false;\n\tvar auiScroll = function (params,callback) {\n\t\tthis.extend(this.params, params);\n\t\tthis._init(params,callback);\n\t}\n\tauiScroll.prototype = {\n\t\tparams: {\n\t\t\tlistren:false,\n            distance: 100\n        },\n\t\t_init : function(params,callback) {\n\t\t\tvar self = this;\n\t\t\tif(self.params.listen){\n\t\t\t\tdocument.body.addEventListener(\"touchmove\", function(e){\n\t\t\t\t\tself.scroll(callback);\n\t\t\t\t});\n\t\t\t\tdocument.body.addEventListener(\"touchend\", function(e){\n\t\t\t\t\tself.scroll(callback);\n\t\t\t\t});\n\t\t\t}\n\t\t\twindow.onscroll = function(){\n\t\t\t\tself.scroll(callback);\n\t\t\t}\n\t\t},\n\t\tscroll : function (callback) {\n\t\t\tvar self = this;\n\t\t\tvar clientHeight = document.documentElement.scrollTop === 0 ? document.body.clientHeight : document.documentElement.clientHeight;\n\t\t\tvar scrollTop = document.documentElement.scrollTop === 0 ? document.body.scrollTop : document.documentElement.scrollTop;\n\t\t\tvar scrollHeight = document.documentElement.scrollTop === 0 ? document.body.scrollHeight : document.documentElement.scrollHeight;\n\n\t\t\tif (scrollHeight-scrollTop-self.params.distance <= window.innerHeight) {\n\t        \tisToBottom = true;\n\t        \tif(isToBottom){\n\t        \t\tcallback({\n\t        \t\t\t\"scrollTop\":scrollTop,\n\t        \t\t\t\"isToBottom\":true\n\t        \t\t})\n\t        \t}\n\t        }else{\n\t        \tisToBottom = false;\n\t        \tcallback({\n        \t\t\t\"scrollTop\":scrollTop,\n        \t\t\t\"isToBottom\":false\n        \t\t})\n\t        }\n\t\t},\n        extend: function(a, b) {\n\t\t\tfor (var key in b) {\n\t\t\t  \tif (b.hasOwnProperty(key)) {\n\t\t\t  \t\ta[key] = b[key];\n\t\t\t  \t}\n\t\t  \t}\n\t\t  \treturn a;\n\t\t}\n\t}\n\twindow.auiScroll = auiScroll;\n})(window);"]}