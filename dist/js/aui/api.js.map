{"version":3,"sources":["aui/api.js"],"names":["window","parseArguments","url","data","fnSuc","dataType","undefined","u","isAndroid","test","navigator","appVersion","uzStorage","ls","localStorage","os","trim","str","String","prototype","call","replace","trimAll","isElement","obj","nodeType","isArray","Array","isEmptyObject","JSON","stringify","addEvt","el","name","fn","useCapture","addEventListener","console","warn","rmEvt","removeEventListener","one","that","this","cb","dom","selector","arguments","length","document","querySelector","domAll","querySelectorAll","byId","id","getElementById","first","children","last","eq","index","not","prev","node","previousSibling","next","nextSibling","closest","doms","targetDom","isSame","i","len","isEqualNode","traversal","parentNode","DOCUMENT_NODE","contains","parent","mark","body","documentElement","remove","removeChild","attr","value","getAttribute","setAttribute","removeAttr","removeAttribute","hasCls","cls","className","indexOf","addCls","classList","add","preCls","newCls","removeCls","toggleCls","toggle","val","tagName","options","selectedIndex","prepend","html","insertAdjacentHTML","append","before","after","innerHTML","text","txt","textContent","offset","sl","Math","max","scrollLeft","st","scrollTop","rect","getBoundingClientRect","l","left","t","top","w","offsetWidth","h","offsetHeight","css","style","cssText","cssVal","prop","computedStyle","getComputedStyle","getPropertyValue","jsonToStr","json","strToJson","parse","setStorage","key","v","setItem","getStorage","getItem","slice","rmStorage","removeItem","clearStorage","clear","fixIos7Bar","strDM","api","systemType","strSV","systemVersion","numSV","parseInt","fullScreen","iOS7StatusBarAppearance","paddingTop","fixStatusBar","sysType","ver","parseFloat","toast","title","time","opts","show","showProgress","setTimeout","hideProgress","tmp","post","argsToJson","apply","type","toLowerCase","method","ajax","ret","err","get","$api"],"mappings":"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","file":"api.js","sourcesContent":["/*\n * APICloud JavaScript Library\n * Copyright (c) 2014 apicloud.com\n */\n(function(window){\n    var u = {};\n    var isAndroid = (/android/gi).test(navigator.appVersion);\n    var uzStorage = function(){\n        var ls = window.localStorage;\n        if(isAndroid){\n           ls = os.localStorage();\n        }\n        return ls;\n    };\n    function parseArguments(url, data, fnSuc, dataType) {\n        if (typeof(data) == 'function') {\n            dataType = fnSuc;\n            fnSuc = data;\n            data = undefined;\n        }\n        if (typeof(fnSuc) != 'function') {\n            dataType = fnSuc;\n            fnSuc = undefined;\n        }\n        return {\n            url: url,\n            data: data,\n            fnSuc: fnSuc,\n            dataType: dataType\n        };\n    }\n    u.trim = function(str){\n        if(String.prototype.trim){\n            return str == null ? \"\" : String.prototype.trim.call(str);\n        }else{\n            return str.replace(/(^\\s*)|(\\s*$)/g, \"\");\n        }\n    };\n    u.trimAll = function(str){\n        return str.replace(/\\s*/g,'');\n    };\n    u.isElement = function(obj){\n        return !!(obj && obj.nodeType == 1);\n    };\n    u.isArray = function(obj){\n        if(Array.isArray){\n            return Array.isArray(obj);\n        }else{\n            return obj instanceof Array;\n        }\n    };\n    u.isEmptyObject = function(obj){\n        if(JSON.stringify(obj) === '{}'){\n            return true;\n        }\n        return false;\n    };\n    u.addEvt = function(el, name, fn, useCapture){\n        if(!u.isElement(el)){\n            console.warn('$api.addEvt Function need el param, el param must be DOM Element');\n            return;\n        }\n        useCapture = useCapture || false;\n        if(el.addEventListener) {\n            el.addEventListener(name, fn, useCapture);\n        }\n    };\n    u.rmEvt = function(el, name, fn, useCapture){\n        if(!u.isElement(el)){\n            console.warn('$api.rmEvt Function need el param, el param must be DOM Element');\n            return;\n        }\n        useCapture = useCapture || false;\n        if (el.removeEventListener) {\n            el.removeEventListener(name, fn, useCapture);\n        }\n    };\n    u.one = function(el, name, fn, useCapture){\n        if(!u.isElement(el)){\n            console.warn('$api.one Function need el param, el param must be DOM Element');\n            return;\n        }\n        useCapture = useCapture || false;\n        var that = this;\n        var cb = function(){\n            fn && fn();\n            that.rmEvt(el, name, cb, useCapture);\n        };\n        that.addEvt(el, name, cb, useCapture);\n    };\n    u.dom = function(el, selector){\n        if(arguments.length === 1 && typeof arguments[0] == 'string'){\n            if(document.querySelector){\n                return document.querySelector(arguments[0]);\n            }\n        }else if(arguments.length === 2){\n            if(el.querySelector){\n                return el.querySelector(selector);\n            }\n        }\n    };\n    u.domAll = function(el, selector){\n        if(arguments.length === 1 && typeof arguments[0] == 'string'){\n            if(document.querySelectorAll){\n                return document.querySelectorAll(arguments[0]);\n            }\n        }else if(arguments.length === 2){\n            if(el.querySelectorAll){\n                return el.querySelectorAll(selector);\n            }\n        }\n    };\n    u.byId = function(id){\n        return document.getElementById(id);\n    };\n    u.first = function(el, selector){\n        if(arguments.length === 1){\n            if(!u.isElement(el)){\n                console.warn('$api.first Function need el param, el param must be DOM Element');\n                return;\n            }\n            return el.children[0];\n        }\n        if(arguments.length === 2){\n            return this.dom(el, selector+':first-child');\n        }\n    };\n    u.last = function(el, selector){\n        if(arguments.length === 1){\n            if(!u.isElement(el)){\n                console.warn('$api.last Function need el param, el param must be DOM Element');\n                return;\n            }\n            var children = el.children;\n            return children[children.length - 1];\n        }\n        if(arguments.length === 2){\n            return this.dom(el, selector+':last-child');\n        }\n    };\n    u.eq = function(el, index){\n        return this.dom(el, ':nth-child('+ index +')');\n    };\n    u.not = function(el, selector){\n        return this.domAll(el, ':not('+ selector +')');\n    };\n    u.prev = function(el){\n        if(!u.isElement(el)){\n            console.warn('$api.prev Function need el param, el param must be DOM Element');\n            return;\n        }\n        var node = el.previousSibling;\n        if(node.nodeType && node.nodeType === 3){\n            node = node.previousSibling;\n            return node;\n        }\n    };\n    u.next = function(el){\n        if(!u.isElement(el)){\n            console.warn('$api.next Function need el param, el param must be DOM Element');\n            return;\n        }\n        var node = el.nextSibling;\n        if(node.nodeType && node.nodeType === 3){\n            node = node.nextSibling;\n            return node;\n        }\n    };\n    u.closest = function(el, selector){\n        if(!u.isElement(el)){\n            console.warn('$api.closest Function need el param, el param must be DOM Element');\n            return;\n        }\n        var doms, targetDom;\n        var isSame = function(doms, el){\n            var i = 0, len = doms.length;\n            for(i; i<len; i++){\n                if(doms[i].isEqualNode(el)){\n                    return doms[i];\n                }\n            }\n            return false;\n        };\n        var traversal = function(el, selector){\n            doms = u.domAll(el.parentNode, selector);\n            targetDom = isSame(doms, el);\n            while(!targetDom){\n                el = el.parentNode;\n                if(el != null && el.nodeType == el.DOCUMENT_NODE){\n                    return false;\n                }\n                traversal(el, selector);\n            }\n\n            return targetDom;\n        };\n\n        return traversal(el, selector);\n    };\n    u.contains = function(parent,el){\n        var mark = false;\n        if(el === parent){\n            mark = true;\n            return mark;\n        }else{\n            do{\n                el = el.parentNode;\n                if(el === parent){\n                    mark = true;\n                    return mark;\n                }\n            }while(el === document.body || el === document.documentElement);\n\n            return mark;\n        }\n\n    };\n    u.remove = function(el){\n        if(el && el.parentNode){\n            el.parentNode.removeChild(el);\n        }\n    };\n    u.attr = function(el, name, value){\n        if(!u.isElement(el)){\n            console.warn('$api.attr Function need el param, el param must be DOM Element');\n            return;\n        }\n        if(arguments.length == 2){\n            return el.getAttribute(name);\n        }else if(arguments.length == 3){\n            el.setAttribute(name, value);\n            return el;\n        }\n    };\n    u.removeAttr = function(el, name){\n        if(!u.isElement(el)){\n            console.warn('$api.removeAttr Function need el param, el param must be DOM Element');\n            return;\n        }\n        if(arguments.length === 2){\n            el.removeAttribute(name);\n        }\n    };\n    u.hasCls = function(el, cls){\n        if(!u.isElement(el)){\n            console.warn('$api.hasCls Function need el param, el param must be DOM Element');\n            return;\n        }\n        if(el.className.indexOf(cls) > -1){\n            return true;\n        }else{\n            return false;\n        }\n    };\n    u.addCls = function(el, cls){\n        if(!u.isElement(el)){\n            console.warn('$api.addCls Function need el param, el param must be DOM Element');\n            return;\n        }\n        if('classList' in el){\n            el.classList.add(cls);\n        }else{\n            var preCls = el.className;\n            var newCls = preCls +' '+ cls;\n            el.className = newCls;\n        }\n        return el;\n    };\n    u.removeCls = function(el, cls){\n        if(!u.isElement(el)){\n            console.warn('$api.removeCls Function need el param, el param must be DOM Element');\n            return;\n        }\n        if('classList' in el){\n            el.classList.remove(cls);\n        }else{\n            var preCls = el.className;\n            var newCls = preCls.replace(cls, '');\n            el.className = newCls;\n        }\n        return el;\n    };\n    u.toggleCls = function(el, cls){\n        if(!u.isElement(el)){\n            console.warn('$api.toggleCls Function need el param, el param must be DOM Element');\n            return;\n        }\n       if('classList' in el){\n            el.classList.toggle(cls);\n        }else{\n            if(u.hasCls(el, cls)){\n                u.removeCls(el, cls);\n            }else{\n                u.addCls(el, cls);\n            }\n        }\n        return el;\n    };\n    u.val = function(el, val){\n        if(!u.isElement(el)){\n            console.warn('$api.val Function need el param, el param must be DOM Element');\n            return;\n        }\n        if(arguments.length === 1){\n            switch(el.tagName){\n                case 'SELECT':\n                    var value = el.options[el.selectedIndex].value;\n                    return value;\n                    break;\n                case 'INPUT':\n                    return el.value;\n                    break;\n                case 'TEXTAREA':\n                    return el.value;\n                    break;\n            }\n        }\n        if(arguments.length === 2){\n            switch(el.tagName){\n                case 'SELECT':\n                    el.options[el.selectedIndex].value = val;\n                    return el;\n                    break;\n                case 'INPUT':\n                    el.value = val;\n                    return el;\n                    break;\n                case 'TEXTAREA':\n                    el.value = val;\n                    return el;\n                    break;\n            }\n        }\n\n    };\n    u.prepend = function(el, html){\n        if(!u.isElement(el)){\n            console.warn('$api.prepend Function need el param, el param must be DOM Element');\n            return;\n        }\n        el.insertAdjacentHTML('afterbegin', html);\n        return el;\n    };\n    u.append = function(el, html){\n        if(!u.isElement(el)){\n            console.warn('$api.append Function need el param, el param must be DOM Element');\n            return;\n        }\n        el.insertAdjacentHTML('beforeend', html);\n        return el;\n    };\n    u.before = function(el, html){\n        if(!u.isElement(el)){\n            console.warn('$api.before Function need el param, el param must be DOM Element');\n            return;\n        }\n        el.insertAdjacentHTML('beforebegin', html);\n        return el;\n    };\n    u.after = function(el, html){\n        if(!u.isElement(el)){\n            console.warn('$api.after Function need el param, el param must be DOM Element');\n            return;\n        }\n        el.insertAdjacentHTML('afterend', html);\n        return el;\n    };\n    u.html = function(el, html){\n        if(!u.isElement(el)){\n            console.warn('$api.html Function need el param, el param must be DOM Element');\n            return;\n        }\n        if(arguments.length === 1){\n            return el.innerHTML;\n        }else if(arguments.length === 2){\n            el.innerHTML = html;\n            return el;\n        }\n    };\n    u.text = function(el, txt){\n        if(!u.isElement(el)){\n            console.warn('$api.text Function need el param, el param must be DOM Element');\n            return;\n        }\n        if(arguments.length === 1){\n            return el.textContent;\n        }else if(arguments.length === 2){\n            el.textContent = txt;\n            return el;\n        }\n    };\n    u.offset = function(el){\n        if(!u.isElement(el)){\n            console.warn('$api.offset Function need el param, el param must be DOM Element');\n            return;\n        }\n        var sl = Math.max(document.documentElement.scrollLeft, document.body.scrollLeft);\n        var st = Math.max(document.documentElement.scrollTop, document.body.scrollTop);\n\n        var rect = el.getBoundingClientRect();\n        return {\n            l: rect.left + sl,\n            t: rect.top + st,\n            w: el.offsetWidth,\n            h: el.offsetHeight\n        };\n    };\n    u.css = function(el, css){\n        if(!u.isElement(el)){\n            console.warn('$api.css Function need el param, el param must be DOM Element');\n            return;\n        }\n        if(typeof css == 'string' && css.indexOf(':') > 0){\n            el.style && (el.style.cssText += ';' + css);\n        }\n    };\n    u.cssVal = function(el, prop){\n        if(!u.isElement(el)){\n            console.warn('$api.cssVal Function need el param, el param must be DOM Element');\n            return;\n        }\n        if(arguments.length === 2){\n            var computedStyle = window.getComputedStyle(el, null);\n            return computedStyle.getPropertyValue(prop);\n        }\n    };\n    u.jsonToStr = function(json){\n        if(typeof json === 'object'){\n            return JSON && JSON.stringify(json);\n        }\n    };\n    u.strToJson = function(str){\n        if(typeof str === 'string'){\n            return JSON && JSON.parse(str);\n        }\n    };\n    u.setStorage = function(key, value){\n        if(arguments.length === 2){\n            var v = value;\n            if(typeof v == 'object'){\n                v = JSON.stringify(v);\n                v = 'obj-'+ v;\n            }else{\n                v = 'str-'+ v;\n            }\n            var ls = uzStorage();\n            if(ls){\n                ls.setItem(key, v);\n            }\n        }\n    };\n    u.getStorage = function(key){\n        var ls = uzStorage();\n        if(ls){\n            var v = ls.getItem(key);\n            if(!v){return;}\n            if(v.indexOf('obj-') === 0){\n                v = v.slice(4);\n                return JSON.parse(v);\n            }else if(v.indexOf('str-') === 0){\n                return v.slice(4);\n            }\n        }\n    };\n    u.rmStorage = function(key){\n        var ls = uzStorage();\n        if(ls && key){\n            ls.removeItem(key);\n        }\n    };\n    u.clearStorage = function(){\n        var ls = uzStorage();\n        if(ls){\n            ls.clear();\n        }\n    };\n\n\n    /*by king*/\n    u.fixIos7Bar = function(el){\n        if(!u.isElement(el)){\n            console.warn('$api.fixIos7Bar Function need el param, el param must be DOM Element');\n            return;\n        }\n        var strDM = api.systemType;\n        if (strDM == 'ios') {\n            var strSV = api.systemVersion;\n            var numSV = parseInt(strSV,10);\n            var fullScreen = api.fullScreen;\n            var iOS7StatusBarAppearance = api.iOS7StatusBarAppearance;\n            if (numSV >= 7 && !fullScreen && iOS7StatusBarAppearance) {\n                el.style.paddingTop = '20px';\n            }\n        }\n    };\n    u.fixStatusBar = function(el){\n        if(!u.isElement(el)){\n            console.warn('$api.fixStatusBar Function need el param, el param must be DOM Element');\n            return;\n        }\n        var sysType = api.systemType;\n        if(sysType == 'ios'){\n            u.fixIos7Bar(el);\n        }else if(sysType == 'android'){\n            var ver = api.systemVersion;\n            ver = parseFloat(ver);\n            if(ver >= 4.4){\n                el.style.paddingTop = '25px';\n            }\n        }\n    };\n    u.toast = function(title, text, time){\n        var opts = {};\n        var show = function(opts, time){\n            api.showProgress(opts);\n            setTimeout(function(){\n                api.hideProgress();\n            },time);\n        };\n        if(arguments.length === 1){\n            var time = time || 500;\n            if(typeof title === 'number'){\n                time = title;\n            }else{\n                opts.title = title+'';\n            }\n            show(opts, time);\n        }else if(arguments.length === 2){\n            var time = time || 500;\n            var text = text;\n            if(typeof text === \"number\"){\n                var tmp = text;\n                time = tmp;\n                text = null;\n            }\n            if(title){\n                opts.title = title;\n            }\n            if(text){\n                opts.text = text;\n            }\n            show(opts, time);\n        }\n        if(title){\n            opts.title = title;\n        }\n        if(text){\n            opts.text = text;\n        }\n        time = time || 500;\n        show(opts, time);\n    };\n    u.post = function(/*url,data,fnSuc,dataType*/){\n        var argsToJson = parseArguments.apply(null, arguments);\n        var json = {};\n        var fnSuc = argsToJson.fnSuc;\n        argsToJson.url && (json.url = argsToJson.url);\n        argsToJson.data && (json.data = argsToJson.data);\n        if(argsToJson.dataType){\n            var type = argsToJson.dataType.toLowerCase();\n            if (type == 'text'||type == 'json') {\n                json.dataType = type;\n            }\n        }else{\n            json.dataType = 'json';\n        }\n        json.method = 'post';\n        api.ajax(json,\n            function(ret,err){\n                if (ret) {\n                    fnSuc && fnSuc(ret);\n                }\n            }\n        );\n    };\n    u.get = function(/*url,fnSuc,dataType*/){\n        var argsToJson = parseArguments.apply(null, arguments);\n        var json = {};\n        var fnSuc = argsToJson.fnSuc;\n        argsToJson.url && (json.url = argsToJson.url);\n        //argsToJson.data && (json.data = argsToJson.data);\n        if(argsToJson.dataType){\n            var type = argsToJson.dataType.toLowerCase();\n            if (type == 'text'||type == 'json') {\n                json.dataType = type;\n            }\n        }else{\n            json.dataType = 'text';\n        }\n        json.method = 'get';\n        api.ajax(json,\n            function(ret,err){\n                if (ret) {\n                    fnSuc && fnSuc(ret);\n                }\n            }\n        );\n    };\n\n/*end*/\n\n\n    window.$api = u;\n\n})(window);\n\n\n"]}