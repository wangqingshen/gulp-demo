{"version":3,"sources":["aui/aui-popup.js"],"names":["window","undefined","auiPopup","this","_init","CLASS_MASK","CLASS_MASK_IN","CLASS_MASK_OUT","CLASS_POPUP_IN","CLASS_POPUP_OUT","CLASS_POPUP_FOR","__MASK","__POPUP_IN","__POPUP_OUT","popupStatus","prototype","self","_btn","document","querySelectorAll","i","length","setAttribute","onclick","e","popupId","getAttribute","popupDom","getElementById","className","indexOf","querySelector","hide","show","el","maskHtml","body","insertAdjacentHTML","style","display","setTimeout","classList","add","addEventListener","event","preventDefault","remove","parentNode","removeChild"],"mappings":"CAOA,SAAWA,EAAQC,GACf,YACA,IAAIC,GAAW,WACXC,KAAKC,SAELC,EAAa,WAChBC,EAAgB,cAChBC,EAAiB,eAEjBC,EAAiB,eACjBC,EAAkB,gBAClBC,EAAkB,gBACfC,EAAS,IAAIN,EAIhBO,EAAa,IAAIJ,EACjBK,EAAc,IAAIJ,EACfK,GAAc,CAClBZ,GAASa,WACLX,MAAO,WACN,GAAIY,GAAOb,KACPc,EAAOC,SAASC,iBAAiB,IAAIT,EAAgB,IACzD,IAAGO,EACF,IAAI,GAAIG,GAAE,EAAEA,EAAEH,EAAKI,OAAOD,IACzBH,EAAKG,GAAGE,aAAa,UAAW,IAChCL,EAAKG,GAAGG,QAAU,SAASC,GAC1B,GAAIC,GAAUtB,KAAKuB,aAAahB,GAC5BiB,EAAWT,SAASU,eAAeH,EACpCE,KACLA,EAASE,UAAUC,QAAQtB,OAAwBU,SAASa,cAAcnB,GACnEI,EAAKgB,KAAKL,GAEbX,EAAKiB,KAAKN,MAShBM,KAAM,SAASC,GACd,GAAIlB,GAAOb,IACX,IAAG+B,EAAGL,UAAUC,QAAQtB,OAAwBU,SAASa,cAAcnB,GAEnE,WADAI,GAAKgB,KAAKE,EAGX,KAAGpB,EAAH,CACH,IAAII,SAASa,cAAcpB,GAAQ,CACxC,GAAIwB,GAAW,8BACfjB,UAASkB,KAAKC,mBAAmB,YAAaF,GAEzCD,EAAGI,MAAMC,QAAU,QACnBC,WAAW,WACVtB,SAASa,cAAcpB,GAAQ8B,UAAUC,IAAIpC,GAC1C4B,EAAGO,UAAUC,IAAIlC,GACdM,GAAc,GAClB,IACHI,SAASa,cAAcpB,GAAQgC,iBAAiB,aAAc,SAASC,GACtEA,EAAMC,iBACN7B,EAAKgB,KAAKE,KAERA,EAAGS,iBAAiB,YAAa,SAASC,GACtCA,EAAMC,mBACR,KAENb,KAAM,SAASE,GACPpB,IACPI,SAASa,cAAcpB,GAAQ8B,UAAUK,OAAOxC,GAChDY,SAASa,cAAcpB,GAAQ8B,UAAUC,IAAInC,GACzCW,SAASa,cAAcnB,KACxBM,SAASa,cAAcnB,GAAY6B,UAAUC,IAAIjC,GACjDS,SAASa,cAAcnB,GAAY6B,UAAUK,OAAOtC,GACvDgC,WAAW,WACAtB,SAASa,cAAclB,KACjCK,SAASa,cAAclB,GAAayB,MAAMC,QAAU,OACjDrB,SAASa,cAAclB,GAAa4B,UAAUK,OAAOrC,GAClDS,SAASa,cAAcpB,IAClCO,SAASa,cAAcpB,GAAQoC,WAAWC,YAAY9B,SAASa,cAAcpB,IAElEG,GAAc,IAClB,SAGXd,EAAOE,SAAWA,GAChBF","file":"aui-popup.js","sourcesContent":["/**\n * aui-popup.js\n * @author 流浪男\n * @todo more things to abstract, e.g. Loading css etc.\n * Licensed under the MIT license.\n * http://www.opensource.org/licenses/mit-license.php\n */\n(function( window, undefined ) {\n    \"use strict\";\n    var auiPopup = function() {\n        this._init();\n    };\n    var\tCLASS_MASK = \"aui-mask\",\n    \tCLASS_MASK_IN = 'aui-mask-in',\n    \tCLASS_MASK_OUT = 'aui-mask-out',\n        CLASS_POPUP = 'aui-popup',\n    \tCLASS_POPUP_IN = 'aui-popup-in',\n    \tCLASS_POPUP_OUT = 'aui-popup-out',\n    \tCLASS_POPUP_FOR = 'aui-popup-for';\n    var\t__MASK = '.'+CLASS_MASK,\n    \t__MASK_IN = '.'+CLASS_MASK_IN,\n    \t__MASK_OUT = '.'+CLASS_MASK_OUT,\n        __POPUP = '.'+CLASS_POPUP,\n    \t__POPUP_IN = '.'+CLASS_POPUP_IN,\n    \t__POPUP_OUT = '.'+CLASS_POPUP_OUT;\n    var popupStatus = false;\n    auiPopup.prototype = {\n        _init: function() {\n        \tvar self = this;\n        \tvar _btn = document.querySelectorAll(\"[\"+CLASS_POPUP_FOR+\"]\");\n        \tif(_btn){\n        \t\tfor(var i=0;i<_btn.length;i++){\n        \t\t\t_btn[i].setAttribute(\"tapmode\", \"\");\n        \t\t\t_btn[i].onclick = function(e){\n        \t\t\t\tvar popupId = this.getAttribute(CLASS_POPUP_FOR);\n        \t\t\t\tvar popupDom = document.getElementById(popupId);\n        \t\t\t\tif(popupDom){\n\t\t\t\t\t\t\tif(popupDom.className.indexOf(CLASS_POPUP_IN) > -1 || document.querySelector(__POPUP_IN)){\n\t\t\t\t\t            self.hide(popupDom);\n\t\t\t\t\t        }else{\n\t\t\t\t\t        \tself.show(popupDom);\n\t\t\t\t\t        }\n        \t\t\t\t}else{\n        \t\t\t\t\treturn;\n        \t\t\t\t}\n\t\t\t\t\t}\n        \t\t}\n        \t}\n        },\n        show: function(el){\n        \tvar self = this;\n        \tif(el.className.indexOf(CLASS_POPUP_IN) > -1 || document.querySelector(__POPUP_IN)){\n\t            self.hide(el);\n\t            return;\n\t        }\n            if(popupStatus) return;\n        \tif(!document.querySelector(__MASK)){\n\t\t\t\tvar maskHtml = '<div class=\"aui-mask\"></div>';\n\t\t\t\tdocument.body.insertAdjacentHTML('beforeend', maskHtml);\n\t\t\t}\n        \tel.style.display = \"block\";\n        \tsetTimeout(function(){\n        \t\tdocument.querySelector(__MASK).classList.add(CLASS_MASK_IN);\n\t            el.classList.add(CLASS_POPUP_IN);\n                popupStatus = true;\n\t        }, 10)\n\t        document.querySelector(__MASK).addEventListener(\"touchstart\", function(event){\n\t        \tevent.preventDefault();\n\t        \tself.hide(el);\n\t        })\n            el.addEventListener(\"touchmove\", function(event){\n                event.preventDefault();\n            },false)\n        },\n        hide: function(el){\n            if(!popupStatus) return;\n        \tdocument.querySelector(__MASK).classList.remove(CLASS_MASK_IN);\n        \tdocument.querySelector(__MASK).classList.add(CLASS_MASK_OUT);\n        \tif(!document.querySelector(__POPUP_IN))return;\n            document.querySelector(__POPUP_IN).classList.add(CLASS_POPUP_OUT);\n            document.querySelector(__POPUP_IN).classList.remove(CLASS_POPUP_IN);\n\t        setTimeout(function(){\n                if(!document.querySelector(__POPUP_OUT))return;\n\t        \tdocument.querySelector(__POPUP_OUT).style.display = \"none\";\n\t            document.querySelector(__POPUP_OUT).classList.remove(CLASS_POPUP_OUT);\n\t            if(document.querySelector(__MASK)){\n\t\t\t\t\tdocument.querySelector(__MASK).parentNode.removeChild(document.querySelector(__MASK));\n\t\t\t\t}\n                popupStatus = false;\n\t        }, 300)\n        }\n    };\n\twindow.auiPopup = auiPopup;\n})(window);"]}