{"version":3,"sources":["aui/aui-sharebox.js"],"names":["window","undefined","auiSharebox","prototype","init","params","callback","this","frameBounces","col","buttons","cancelTitle","maskDiv","shareBoxDiv","self","open","buttonsHtml","document","createElement","className","body","appendChild","length","i","image","text","innerHTML","offsetHeight","classList","add","style","webkitTransform","transform","opacity","addEventListener","event","preventDefault","api","setFrameAttr","bounces","shareboxButtons","querySelectorAll","setTimeout","onclick","close","ii","e","value","_value","buttonIndex","buttonValue","querySelector","actionsheetHeight","parentNode","removeChild"],"mappings":"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","file":"aui-sharebox.js","sourcesContent":["/**\n * aui-sharebox.js\n * @author 流浪男\n * Licensed under the MIT license.\n * http://www.opensource.org/licenses/mit-license.php\n */\n(function( window, undefined ) {\n    \"use strict\";\n    var auiSharebox = function() {\n    };\n    var isShow = false;\n    auiSharebox.prototype = {\n        init: function(params,callback){\n            this.frameBounces = params.frameBounces;\n            this.col = params.col;\n            this.buttons = params.buttons;\n            this.cancelTitle = params.cancelTitle;\n            this.maskDiv;\n            this.shareBoxDiv;\n            var self = this;\n            self.open(params,callback);\n        },\n        open: function(params,callback) {\n            var shareboxHtml='',buttonsHtml = '';\n        \tvar self = this;\n            if(self.shareBoxDiv || !self.buttons)return;\n            if(!self.maskDiv){\n                self.maskDiv = document.createElement(\"div\");\n                self.maskDiv.className = \"aui-mask\";\n                document.body.appendChild(self.maskDiv);\n            }\n            if(!self.col)self.col = 5;\n            self.shareBoxDiv = document.createElement(\"div\");\n            self.shareBoxDiv.className = \"aui-sharebox aui-grid\";\n            document.body.appendChild(self.shareBoxDiv);\n            if(self.buttons && self.buttons.length){\n                buttonsHtml = '<div class=\"aui-row aui-row-padded\">';\n                for(var i = 0; i < self.buttons.length;i++){\n                    if(self.col == 5){\n                        buttonsHtml += '<div class=\"aui-col-5 aui-sharebox-btn\">';\n                    }else{\n                        buttonsHtml += '<div class=\"aui-col-xs-'+(12/self.col)+' aui-sharebox-btn\">';\n                    }\n                    if(self.buttons[i].image)buttonsHtml += '<img src=\"'+self.buttons[i].image+'\">';\n                    if(self.buttons[i].text)buttonsHtml += '<div class=\"aui-grid-label\">'+self.buttons[i].text+'</div>';\n                    buttonsHtml += '</div>';\n                }\n                buttonsHtml += '</div>';\n            }\n            if(self.cancelTitle){\n                buttonsHtml += '<div class=\"aui-sharebox-close-btn aui-border-t\">'+this.cancelTitle+'</div>';\n            }\n            self.shareBoxDiv.innerHTML = buttonsHtml;\n            var actionsheetHeight = self.shareBoxDiv.offsetHeight;\n            self.maskDiv.classList.add(\"aui-mask-in\");\n            self.shareBoxDiv.style.webkitTransform = self.shareBoxDiv.style.transform = \"translate3d(0,0,0)\";\n            self.shareBoxDiv.style.opacity = 1;\n            self.shareBoxDiv.addEventListener(\"touchmove\", function(event){\n                event.preventDefault();\n            })\n            self.maskDiv.addEventListener(\"touchmove\", function(event){\n                event.preventDefault();\n            })\n            if(typeof(api) != 'undefined' && typeof(api) == 'object' && self.frameBounces){\n                api.setFrameAttr({\n                    bounces:false\n                });\n            }\n            var shareboxButtons = document.querySelectorAll(\".aui-sharebox-btn\");\n            if(shareboxButtons && shareboxButtons.length > 0){\n                setTimeout(function(){\n                    self.maskDiv.onclick = function(){self.close();return;};\n                    for(var ii = 0; ii < shareboxButtons.length; ii++){\n                        (function(e){\n                            shareboxButtons[e].onclick = function(){\n                                if(self.buttons[e].value){\n                                    var _value = self.buttons[e].value;\n                                }else{\n                                    var _value = null;\n                                }\n                                if(callback){\n                                    callback({\n                                        buttonIndex: e+1,\n                                        buttonValue:_value\n                                    });\n                                };\n                                self.close();\n                                return;\n                            }\n                        })(ii)\n                    }\n                }, 350)\n\n            }\n            document.querySelector(\".aui-sharebox-close-btn\").onclick = function(){self.close();return;};\n        },\n        close: function(){\n            var self = this;\n            if(typeof(api) != 'undefined' && typeof(api) == 'object' && self.frameBounces){\n                api.setFrameAttr({\n                    bounces:true\n                });\n            }\n            if(self.shareBoxDiv){\n                var actionsheetHeight = self.shareBoxDiv.offsetHeight;\n                self.shareBoxDiv.style.webkitTransform = self.shareBoxDiv.style.transform = \"translate3d(0,\"+actionsheetHeight+\"px,0)\";\n                self.maskDiv.style.opacity = 0;\n                setTimeout(function(){\n                    if(self.maskDiv){\n                        self.maskDiv.parentNode.removeChild(self.maskDiv);\n                    }\n                    self.shareBoxDiv.parentNode.removeChild(self.shareBoxDiv);\n                    self.maskDiv = self.shareBoxDiv = false;\n                }, 300)\n            }\n        }\n    };\n\twindow.auiSharebox = auiSharebox;\n})(window);"]}