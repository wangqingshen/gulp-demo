{"version":3,"sources":["aui/aui-dialog.js"],"names":["window","undefined","auiDialog","prototype","params","title","msg","buttons","input","create","callback","self","this","dialogHtml","buttonsHtml","headerHtml","text","msgHtml","length","i","footerHtml","document","body","insertAdjacentHTML","dialogButtons","querySelectorAll","ii","onclick","buttonIndex","parseInt","getAttribute","querySelector","value","close","open","style","marginTop","Math","round","offsetHeight","maskHtml","setTimeout","classList","add","addEventListener","e","preventDefault","remove","parentNode","removeChild","alert","prompt"],"mappings":"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","file":"aui-dialog.js","sourcesContent":["/**\n * aui-dialog.js\n * @author 流浪男\n * @todo more things to abstract, e.g. Loading css etc.\n * Licensed under the MIT license.\n * http://www.opensource.org/licenses/mit-license.php\n */\n(function( window, undefined ) {\n    \"use strict\";\n    var auiDialog = function() {\n    };\n    var isShow = false;\n    auiDialog.prototype = {\n        params: {\n            title:'',\n            msg:'',\n            buttons: ['取消','确定'],\n            input:false\n        },\n        create: function(params,callback) {\n        \tvar self = this;\n            var dialogHtml = '';\n            var buttonsHtml = '';\n            var headerHtml = params.title ? '<div class=\"aui-dialog-header\">' + params.title + '</div>' : '<div class=\"aui-dialog-header\">' + self.params.title + '</div>';\n            if(params.input){\n                params.text = params.text ? params.text: '';\n                var msgHtml = '<div class=\"aui-dialog-body\"><input type=\"text\" placeholder=\"'+params.text+'\"></div>';\n            }else{\n                var msgHtml = params.msg ? '<div class=\"aui-dialog-body\">' + params.msg + '</div>' : '<div class=\"aui-dialog-body\">' + self.params.msg + '</div>';\n            }\n            var buttons = params.buttons ? params.buttons : self.params.buttons;\n            if (buttons && buttons.length > 0) {\n                for (var i = 0; i < buttons.length; i++) {\n                    buttonsHtml += '<div class=\"aui-dialog-btn\" tapmode button-index=\"'+i+'\">'+buttons[i]+'</div>';\n                }\n            }\n            var footerHtml = '<div class=\"aui-dialog-footer\">'+buttonsHtml+'</div>';\n            dialogHtml = '<div class=\"aui-dialog\">'+headerHtml+msgHtml+footerHtml+'</div>';\n            document.body.insertAdjacentHTML('beforeend', dialogHtml);\n            // listen buttons click\n            var dialogButtons = document.querySelectorAll(\".aui-dialog-btn\");\n            if(dialogButtons && dialogButtons.length > 0){\n                for(var ii = 0; ii < dialogButtons.length; ii++){\n                    dialogButtons[ii].onclick = function(){\n                        if(callback){\n                            if(params.input){\n                                callback({\n                                    buttonIndex: parseInt(this.getAttribute(\"button-index\"))+1,\n                                    text: document.querySelector(\"input\").value\n                                });\n                            }else{\n                                callback({\n                                    buttonIndex: parseInt(this.getAttribute(\"button-index\"))+1\n                                });\n                            }\n                        };\n                        self.close();\n                        return;\n                    }\n                }\n            }\n            self.open();\n        },\n        open: function(){\n            if(!document.querySelector(\".aui-dialog\"))return;\n            var self = this;\n            document.querySelector(\".aui-dialog\").style.marginTop =  \"-\"+Math.round(document.querySelector(\".aui-dialog\").offsetHeight/2)+\"px\";\n            if(!document.querySelector(\".aui-mask\")){\n                var maskHtml = '<div class=\"aui-mask\"></div>';\n                document.body.insertAdjacentHTML('beforeend', maskHtml);\n            }\n            // document.querySelector(\".aui-dialog\").style.display = \"block\";\n            setTimeout(function(){\n                document.querySelector(\".aui-dialog\").classList.add(\"aui-dialog-in\");\n                document.querySelector(\".aui-mask\").classList.add(\"aui-mask-in\");\n                document.querySelector(\".aui-dialog\").classList.add(\"aui-dialog-in\");\n            }, 10)\n            document.querySelector(\".aui-mask\").addEventListener(\"touchmove\", function(e){\n                e.preventDefault();\n            })\n            document.querySelector(\".aui-dialog\").addEventListener(\"touchmove\", function(e){\n                e.preventDefault();\n            })\n            return;\n        },\n        close: function(){\n            var self = this;\n            document.querySelector(\".aui-mask\").classList.remove(\"aui-mask-in\");\n            document.querySelector(\".aui-dialog\").classList.remove(\"aui-dialog-in\");\n            document.querySelector(\".aui-dialog\").classList.add(\"aui-dialog-out\");\n            if (document.querySelector(\".aui-dialog:not(.aui-dialog-out)\")) {\n                setTimeout(function(){\n                    if(document.querySelector(\".aui-dialog\"))document.querySelector(\".aui-dialog\").parentNode.removeChild(document.querySelector(\".aui-dialog\"));\n                    self.open();\n                    return true;\n                },200)\n            }else{\n                document.querySelector(\".aui-mask\").classList.add(\"aui-mask-out\");\n                document.querySelector(\".aui-dialog\").addEventListener(\"webkitTransitionEnd\", function(){\n                    self.remove();\n                })\n                document.querySelector(\".aui-dialog\").addEventListener(\"transitionend\", function(){\n                    self.remove();\n                })\n            }\n        },\n        remove: function(){\n            if(document.querySelector(\".aui-dialog\"))document.querySelector(\".aui-dialog\").parentNode.removeChild(document.querySelector(\".aui-dialog\"));\n            if(document.querySelector(\".aui-mask\")){\n                document.querySelector(\".aui-mask\").classList.remove(\"aui-mask-out\");\n            }\n            return true;\n        },\n        alert: function(params,callback){\n        \tvar self = this;\n            return self.create(params,callback);\n        },\n        prompt:function(params,callback){\n            var self = this;\n            params.input = true;\n            return self.create(params,callback);\n        }\n    };\n\twindow.auiDialog = auiDialog;\n})(window);"]}