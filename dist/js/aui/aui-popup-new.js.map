{"version":3,"sources":["aui/aui-popup-new.js"],"names":["window","undefined","auiPopup","prototype","init","params","callback","this","frameBounces","location","buttons","maskDiv","popupDiv","self","open","buttonsHtml","locationClass","close","document","createElement","className","body","appendChild","innerHTML","length","i","image","text","querySelector","insertAdjacentHTML","offsetHeight","classList","add","addEventListener","event","preventDefault","api","setFrameAttr","bounces","popupButtons","querySelectorAll","setTimeout","onclick","ii","e","value","_value","buttonIndex","buttonTitle","textContent","buttonValue","style","opacity","parentNode","removeChild"],"mappings":"CAMA,SAAWA,EAAQC,GACf,YACA,IAAIC,GAAW,YAGfA,GAASC,WACLC,KAAM,SAASC,EAAOC,GAClBC,KAAKC,aAAeH,EAAOG,aAC3BD,KAAKE,SAAWJ,EAAOI,SACvBF,KAAKG,QAAUL,EAAOK,QACtBH,KAAKI,QACLJ,KAAKK,QACL,IAAIC,GAAON,IACXM,GAAKC,KAAKT,EAAOC,IAErBQ,KAAM,SAAST,EAAOC,GAClB,GAAIS,GAAY,GAAGC,EAAgB,gBAClCH,EAAON,IACR,IAAGM,EAAKD,SAEJ,WADAC,GAAKI,OAQT,QALIJ,EAAKF,UACLE,EAAKF,QAAUO,SAASC,cAAc,OACtCN,EAAKF,QAAQS,UAAY,WACzBF,SAASG,KAAKC,YAAYT,EAAKF,UAE3BE,EAAKJ,UACT,IAAK,MACDO,EAAgB,eAChB,MACJ,KAAK,WACDA,EAAgB,oBAChB,MACJ,KAAK,YACDA,EAAgB,qBAChB,MACJ,KAAK,SACDA,EAAgB,kBAChB,MACJ,KAAK,cACDA,EAAgB,uBAChB,MACJ,KAAK,eACDA,EAAgB,wBAChB,MACJ,SACIA,EAAgB,gBAOxB,GAJAH,EAAKD,SAAWM,SAASC,cAAc,OACvCN,EAAKD,SAASQ,UAAY,aAAaJ,EACvCH,EAAKD,SAASW,UAAY,2EAC1BL,SAASG,KAAKC,YAAYT,EAAKD,UAC5BC,EAAKH,SAAWG,EAAKH,QAAQc,OAAO,CACnCT,GAAe,yCACf,KAAI,GAAIU,GAAI,EAAGA,EAAIZ,EAAKH,QAAQc,OAAOC,IACnCV,GAAe,kDACfA,GAAe,mDAAmDF,EAAKH,QAAQe,GAAGC,MAAM,WACxFX,GAAe,oCAAoCF,EAAKH,QAAQe,GAAGE,KAAK,SACxEZ,GAAe,OAEnBA,IAAe,QAEnBG,SAASU,cAAc,iCAAiCC,mBAAmB,YAAad,EAChEG,UAASU,cAAc,cAAcE,YAC7DjB,GAAKF,QAAQoB,UAAUC,IAAI,eAC3BnB,EAAKD,SAASmB,UAAUC,IAAI,gBAC5BnB,EAAKD,SAASqB,iBAAiB,YAAa,SAASC,GACjDA,EAAMC,mBAEVtB,EAAKF,QAAQsB,iBAAiB,YAAa,SAASC,GAChDA,EAAMC,mBAEQ,mBAAT,MAAuC,gBAAT,MAAqBtB,EAAKL,cAC7D4B,IAAIC,cACAC,SAAQ,GAGhB,IAAIC,GAAerB,SAASsB,iBAAiB,4BAC1CD,IAAgBA,EAAaf,OAAS,GACrCiB,WAAW,WACP5B,EAAKF,QAAQ+B,QAAU,WAAW7B,EAAKI,QACvC,KAAI,GAAI0B,GAAK,EAAGA,EAAKJ,EAAaf,OAAQmB,KACtC,SAAUC,GACNL,EAAaK,GAAGF,QAAU,WACtB,GAAG7B,EAAKH,QAAQkC,GAAGC,MACf,GAAIC,GAASjC,EAAKH,QAAQkC,GAAGC,UAE7B,IAAIC,GAAS,IAEdxC,IACCA,GACIyC,YAAaH,EAAE,EACfI,YAAazC,KAAK0C,YAClBC,YAAaJ,IAGrBjC,EAAKI,UAGV0B,IAER,MAGX1B,MAAO,WACH,GAAIJ,GAAON,IAMX,IALkB,mBAAT,MAAuC,gBAAT,MAAqBM,EAAKL,cAC7D4B,IAAIC,cACAC,SAAQ,IAGbzB,EAAKD,SAAS,CACWC,EAAKD,SAASkB,YACtCjB,GAAKD,SAASmB,UAAUC,IAAI,iBAC5BnB,EAAKF,QAAQwC,MAAMC,QAAU,EAC7BX,WAAW,WACJ5B,EAAKF,SACJE,EAAKF,QAAQ0C,WAAWC,YAAYzC,EAAKF,SAE7CE,EAAKD,SAASyC,WAAWC,YAAYzC,EAAKD,UAC1CC,EAAKF,QAAUE,EAAKD,UAAW,GAChC,QAIlBZ,EAAOE,SAAWA,GAChBF","file":"aui-popup-new.js","sourcesContent":["/**\n * aui-popup.js\n * @author 流浪男\n * Licensed under the MIT license.\n * http://www.opensource.org/licenses/mit-license.php\n */\n(function( window, undefined ) {\n    \"use strict\";\n    var auiPopup = function() {\n    };\n    var isShow = false;\n    auiPopup.prototype = {\n        init: function(params,callback){\n            this.frameBounces = params.frameBounces;\n            this.location = params.location;\n            this.buttons = params.buttons;\n            this.maskDiv;\n            this.popupDiv;\n            var self = this;\n            self.open(params,callback);\n        },\n        open: function(params,callback) {\n            var buttonsHtml='',locationClass = 'aui-popup-top';\n        \tvar self = this;\n            if(self.popupDiv){\n                self.close();\n                return;\n            }\n            if(!self.maskDiv){\n                self.maskDiv = document.createElement(\"div\");\n                self.maskDiv.className = \"aui-mask\";\n                document.body.appendChild(self.maskDiv);\n            }\n            switch (self.location) {\n                case \"top\":\n                    locationClass = 'aui-popup-top';\n                    break;\n                case \"top-left\":\n                    locationClass = 'aui-popup-top-left';\n                    break;\n                case \"top-right\":\n                    locationClass = 'aui-popup-top-right';\n                    break;\n                case \"bottom\":\n                    locationClass = 'aui-popup-bottom';\n                    break;\n                case \"bottom-left\":\n                    locationClass = 'aui-popup-bottom-left';\n                    break;\n                case \"bottom-right\":\n                    locationClass = 'aui-popup-bottom-right';\n                    break;\n                default:\n                    locationClass = 'aui-popup-top';\n                    break;\n            }\n            self.popupDiv = document.createElement(\"div\");\n            self.popupDiv.className = \"aui-popup \"+locationClass;\n            self.popupDiv.innerHTML = '<div class=\"aui-popup-arrow\"></div><div class=\"aui-popup-content\"></div>';\n            document.body.appendChild(self.popupDiv);\n            if(self.buttons && self.buttons.length){\n                buttonsHtml += '<ul class=\"aui-list aui-list-noborder\">';\n                for(var i = 0; i < self.buttons.length;i++){\n                    buttonsHtml += '<li class=\"aui-list-item aui-list-item-middle\">';\n                    buttonsHtml += '<div class=\"aui-list-item-label-icon\"><img src=\"'+self.buttons[i].image+'\"></div>';\n                    buttonsHtml += '<div class=\"aui-list-item-inner\">'+self.buttons[i].text+'</div>';\n                    buttonsHtml += '</li>';\n                }\n                buttonsHtml += '</ul>';\n            }\n            document.querySelector(\".aui-popup .aui-popup-content\").insertAdjacentHTML('beforeend', buttonsHtml);\n            var actionsheetHeight = document.querySelector(\".aui-popup\").offsetHeight;\n            self.maskDiv.classList.add(\"aui-mask-in\");\n            self.popupDiv.classList.add(\"aui-popup-in\");\n            self.popupDiv.addEventListener(\"touchmove\", function(event){\n                event.preventDefault();\n            })\n            self.maskDiv.addEventListener(\"touchmove\", function(event){\n                event.preventDefault();\n            })\n            if(typeof(api) != 'undefined' && typeof(api) == 'object' && self.frameBounces){\n                api.setFrameAttr({\n                    bounces:false\n                });\n            }\n            var popupButtons = document.querySelectorAll(\".aui-popup .aui-list-item\");\n            if(popupButtons && popupButtons.length > 0){\n                setTimeout(function(){\n                    self.maskDiv.onclick = function(){self.close();return;};\n                    for(var ii = 0; ii < popupButtons.length; ii++){\n                        (function(e){\n                            popupButtons[e].onclick = function(){\n                                if(self.buttons[e].value){\n                                    var _value = self.buttons[e].value;\n                                }else{\n                                    var _value = null;\n                                }\n                                if(callback){\n                                    callback({\n                                        buttonIndex: e+1,\n                                        buttonTitle: this.textContent,\n                                        buttonValue: _value\n                                    });\n                                };\n                                self.close();\n                                return;\n                            }\n                        })(ii)\n                    }\n                }, 350)\n            }\n        },\n        close: function(){\n            var self = this;\n            if(typeof(api) != 'undefined' && typeof(api) == 'object' && self.frameBounces){\n                api.setFrameAttr({\n                    bounces:true\n                });\n            }\n            if(self.popupDiv){\n                var actionsheetHeight = self.popupDiv.offsetHeight;\n                self.popupDiv.classList.add(\"aui-popup-out\");\n                self.maskDiv.style.opacity = 0;\n                setTimeout(function(){\n                    if(self.maskDiv){\n                        self.maskDiv.parentNode.removeChild(self.maskDiv);\n                    }\n                    self.popupDiv.parentNode.removeChild(self.popupDiv);\n                    self.maskDiv = self.popupDiv = false;\n                }, 300)\n            }\n        }\n    };\n\twindow.auiPopup = auiPopup;\n})(window);"]}